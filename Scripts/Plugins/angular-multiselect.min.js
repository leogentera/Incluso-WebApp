angular.module("ui.multiselect", []).directive("multiselectDropdown", [function () { return function (e, t, n) { t = $(t[0]); t.multiselect({ buttonClass: "btn btn-small", buttonWidth: "200px", buttonContainer: '<div class="btn-group" />', maxHeight: 200, enableFiltering: false, buttonText: function (e) { if (e.length == 0) { return '<span class="selectedoptions">' + t.data()["placeholder"] + '</span><div class="arrow"><b class="caret"></b></div>' } else if (e.length > 1) { return '<span class="selectedoptions">' + _.first(e).text + " + " + (e.length - 1) + ' más seleccionados</span><div class="arrow"><b class="caret"></b></div>' } else { return '<span class="selectedoptions">' + _.first(e).text + '</span><div class="arrow"><b class="caret"></b></div>' } }, onChange: function (e, n) { e.removeAttr("selected"); if (n) { e.attr("selected", "selected") } t.change() } }); e.$watch(function () { return t[0].length }, function () { t.multiselect("rebuild") }); e.$watch(n.ngModel, function () { t.multiselect("refresh") }) } }])